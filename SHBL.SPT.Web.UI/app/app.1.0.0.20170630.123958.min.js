/*! IPP.Hazel.UI.Web 1.0.0 - 2017-06-30 12:39:58 */
(function(){"use strict";angular.module("app.common",[]);angular.module("app.common.configs",[]);angular.module("app.common.directives",[]);angular.module("app.common.services",[]);angular.module("app.services.api",[]);angular.module("app.services.misc",[]);angular.module("app.directives",[]);angular.module("app.directives.widgets",[]);angular.module("app.controllers",[]);angular.module("app.controllers.account",[]);angular.module("app.controllers.home",[]);angular.module("app.controllers.property",[]);angular.module("app.controllers.ldc",[]);angular.module("app",["ui.bootstrap","ui.router","ui.router.tabs","LocalStorageModule","ui.utils","oc.lazyLoad","angular-loading-bar","ngAnimate","ngTouch","app.common","app.common.configs","app.common.directives","app.common.services","app.services.api","app.services.misc","app.directives","app.directives.widgets","app.controllers","app.controllers.account","app.controllers.home","app.controllers.property"])})();(function(){"use strict";angular.module("app").constant("ngSettings",{apiServiceBaseUri:"https://api.thehazelproject.com/",ldcAuthServiceBaseUri:"https://ldc.thehazelproject.com/",googleApiKey:"AIzaSyAyGCAoo2_Rdl28WpMaUwsYl9sCQySsi9I"})})();(function(){"use strict";var a=APPLICATION_VERSION+"/";angular.module("app").constant("URL",{TPL:a+"tpl/",HOME:{TPL:a+"tpl/home/",CTRL:"app/controllers/home/"},WEB_AUTH:{TPL:a+"tpl/webAuth/",CTRL:"app/controllers/webAuth/"},ACCOUNT:{TPL:a+"tpl/account/",CTRL:"app/controllers/account/"},ERROR:{TPL:a+"tpl/error/",CTRL:"app/controllers/error/"},PROPERTY:{TPL:a+"tpl/Property/",CTRL:"app/controllers/Property/"},LDC:{TPL:a+"tpl/ldc/",CTRL:"app/controllers/ldc/"},SERVICES:{API:"app/services/api/",MISC:"app/services/misc/"},PLUGINES:"assets/plugins/",DIRECTIVES:"app/directives/",WIDGETS:{ROOT:"app/directives/widgets/",TPL:a+"app/directives/widgets/"},CONFIGS:"app/configs/",CONSTANTS:"app/constants/",COMMON:{CONFIGS:"app/common/configs/",DIRECTIVES:"app/common/directives/",SERVICES:"app/common/services/"}})})();(function(){"use strict";angular.module("app").config(["$ocLazyLoadProvider","URL",function(a,b){var c=[];var d="app/configs/config.lazyload"+APPLICATION_VERSION+".json";$.ajax({dataType:"json",url:d,async:false,success:function(a){c=a}});a.config({debug:false,events:true,modules:c})}])})();(function(){"use strict";angular.module("app").config(a);a.$inject=["$stateProvider","$urlRouterProvider","$ocLazyLoadProvider","$locationProvider","URL","ngSettings"];function a(a,b,c,d,e,f){b.when("/",["$state","$rootScope","stateService","storageService",function(a,b,c,d){var e=d.authData.get();if(e&&e.isAuthenticated){c.go("app.dashboard")}else{b.redirectToLogin()}}]);a.state("auth",{url:"/auth",template:'<div class="full-height" ui-view></div>',"abstract":true,resolve:{auth_module:["$ocLazyLoad",function(a){return a.load(["webAuth-module"],{insertBefore:"#lazyload_placeholder"})}]}}).state("auth.home",{url:"",templateUrl:e.WEB_AUTH.TPL+"authHome.html","abstract":true,controller:"authHomeController",resolve:{model:["auth_module","$ocLazyLoad","webAuthService",function(a,b,c){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return c.getAuthHome()})}]}}).state("auth.home.login",{url:"/login",template:'<div class="full-height" ui-view></div>',"abstract":true}).state("auth.home.login.default",{url:"",templateUrl:e.WEB_AUTH.TPL+"login.html",controller:"loginController",resolve:{model:["auth_module","$ocLazyLoad","webAuthService",function(a,b,c){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return c.getLogin()})}]}}).state("auth.home.login.social",{url:"/social",templateUrl:e.WEB_AUTH.TPL+"loginSocial.html",controller:"loginSocialController",resolve:{model:["auth_module","$ocLazyLoad","webAuthService",function(a,b,c){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return c.getLoginSocial()})}]}}).state("auth.home.register",{url:"/register",templateUrl:e.WEB_AUTH.TPL+"register.html",controller:"registerController",resolve:{model:["auth_module","$ocLazyLoad","webAuthService",function(a,b,c){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return c.getRegister()})}]}}).state("auth.home.forgetPassword",{url:"/forgetPassword",templateUrl:e.WEB_AUTH.TPL+"forgetPassword.html",controller:"forgetPasswordController",resolve:{model:["auth_module","$ocLazyLoad","webAuthService",function(a,b,c){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return c.getForgetPassword()})}]}}).state("auth.complete",{url:"/complete",template:'<div class="full-height truncate"></div>',controller:"authCompleteController"}).state("app",{"abstract":true,url:"",templateUrl:e.HOME.TPL+"layout.html",controller:"layoutController",resolve:{home_module:["$ocLazyLoad","$injector",function(a,b){return a.load(["common.directives-module","home-module"],{insertBefore:"#lazyload_placeholder"}).then(function(){var a=b.get("homeService");a.getHeader()})}]}}).state("app.dashboard",{url:"/dashboard",templateUrl:e.HOME.TPL+"dashboard.html",controller:"dashboardController",resolve:{model:["home_module","$ocLazyLoad","homeService",function(a,b,c){return b.load(["google-map","metrojs","nvd3","switchery","api-widgetService","map-widget","property-statistics","requests-statistics","energy-statistics","current-usage","news-widget"],{insertBefore:"#lazyload_placeholder"}).then(function(){return c.getDashboard()})}]}}).state("app.property",{url:"/property",template:'<div class="full-height" ui-view></div>',"abstract":true,resolve:{property_module:["$ocLazyLoad","$injector",function(a,b){return a.load(["property-module","datepicker"],{insertBefore:"#lazyload_placeholder"})}]}}).state("app.property.propertyList",{url:"",templateUrl:e.PROPERTY.TPL+"propertyList.html",controller:"propertyListController",resolve:{model:["property_module","$ocLazyLoad","propertyService",function(a,b,c){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return c.getPropertyList()})}]}}).state("app.property.propertyDetail",{url:"/:PropertyDetailID",templateUrl:e.PROPERTY.TPL+"propertyDetail.html",controller:"propertyDetailController","abstract":true,resolve:{model:["property_module","$ocLazyLoad","$stateParams","propertyService",function(a,b,c,d){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return d.getPropertyDetail(c)})}]}}).state("app.property.propertyDetail.main",{url:"",templateUrl:e.PROPERTY.TPL+"propertyDetail.main.html",controller:"propertyDetailMainController",resolve:{model:["property_module","$ocLazyLoad","$stateParams","propertyService",function(a,b,c,d){return b.load(["google-map"],{insertBefore:"#lazyload_placeholder"}).then(function(){return null})}]}}).state("app.property.propertyDetail.analytics",{url:"/analytics",templateUrl:e.PROPERTY.TPL+"propertyDetail.analytics.html",controller:"propertyDetailAnalyticsController",resolve:{model:["property_module","$ocLazyLoad","$stateParams","propertyService",function(a,b,c,d){return b.load(["chart-js"],{insertBefore:"#lazyload_placeholder"}).then(function(){return d.getPropertyDetailAnalytics(c.PropertyDetailID)})}]}}).state("app.property.propertyDetail.connect",{url:"/connect",templateUrl:e.PROPERTY.TPL+"propertyDetail.connect.html",controller:"propertyDetailConnectController",resolve:{model:["property_module","$ocLazyLoad","$stateParams","propertyService",function(a,b,c,d){return b.load(["ldc-module"],{insertBefore:"#lazyload_placeholder"}).then(function(){return d.getPropertyDetailConnect(c.PropertyDetailID)})}]}}).state("app.property.submitProperty",{url:"/submit/:PropertyDetailID",templateUrl:e.PROPERTY.TPL+"submitProperty.html",controller:"submitPropertyController",resolve:{model:["property_module","$ocLazyLoad","$stateParams","propertyService",function(a,b,c,d){return b.load(["autonumeric","select","google-map","rickshaw","sparkline"],{insertBefore:"#lazyload_placeholder"}).then(function(){return d.getSubmitProperty(c)})}]}}).state("app.account",{url:"/account",template:'<div class="full-height" ui-view></div>',"abstract":true,resolve:{account_module:["$ocLazyLoad","$injector",function(a,b){return a.load(["account-module"],{insertBefore:"#lazyload_placeholder"})}]}}).state("app.account.userProfile",{url:"/userProfile",templateUrl:e.ACCOUNT.TPL+"userProfile.html",controller:"userProfileController",resolve:{model:["account_module","$ocLazyLoad","accountService",function(a,b,c){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return c.getUserProfile()})}]}}).state("app.error",{template:'<div class="full-height" ui-view></div>',"abstract":true}).state("app.error.403",{templateUrl:e.ERROR.TPL+"403.html"}).state("ldc",{url:"/ldc",template:'<div class="full-height truncate" ui-view></div>',"abstract":true,resolve:{ldc_module:["$ocLazyLoad","$injector",function(a,b){return a.load(["ldc-module"],{insertBefore:"#lazyload_placeholder"})}]}}).state("ldc.scopeSelection",{url:"/scopeSelection?scope&DataCustodianID",templateUrl:e.LDC.TPL+"scopeSelection.html",controller:"scopeSelectionController",resolve:{model:["ldc_module","$ocLazyLoad","$stateParams","ldcService",function(a,b,c,d){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){return d.getScopeSelection(c.scope,c.DataCustodianID)})}]}}).state("ldc.complete",{url:"/complete/:PropertyDetailID",template:'<div class="full-height truncate"></div>',controller:"ldcAuthCompleteController",resolve:{model:["ldc_module","$ocLazyLoad","$stateParams","ldcService",function(a,b,c,d){return b.load([],{insertBefore:"#lazyload_placeholder"}).then(function(){var a={PropertyDetailID:c.PropertyDetailID};return a})}]}}).state("error",{template:'<div class="full-height" ui-view></div>',"abstract":true}).state("error.404",{templateUrl:e.ERROR.TPL+"404.html"}).state("error.500",{templateUrl:e.ERROR.TPL+"500.html"});d.html5Mode(true);b.otherwise(function(a,b){a.invoke(["$state",function(a){a.go("error.404")}])})}})();(function(){"use strict";angular.module("app").config(a);a.$inject=["$httpProvider"];function a(a){a.interceptors.push("authInterceptorService")}angular.module("app").config(["cfpLoadingBarProvider",function(a){a.spinnerTemplate='<div id="loading-bar-spinner-custom"></div>'}]);angular.module("app").run(b);b.$inject=["$window","$rootScope","$templateCache"];function b(a,b,c){b.is_mobile=a.innerWidth<480;b.logger=function(){var a=null;var b={};b.enableLogger=function c(){if(a==null)return;window["console"]["log"]=a};b.disableLogger=function d(){a=console.log;window["console"]["log"]=function(){}};return b}()}angular.module("app").run(c);c.$inject=["$rootScope","$state","$stateParams","$location","cfpLoadingBar","stateService","storageService","authService"];function c(a,b,c,d,e,f,g,h){a.$state=b;a.$stateParams=c;a.$on("$stateChangeStart",function(b,c,e,i,j){var k=g.authData.get();if(k&&k.isAuthenticated){if(c.name.includes("auth.")){b.preventDefault();f.go("app.dashboard")}}else{if(!c.name.includes("auth.")&&!c.name.includes("error.")){h.setRedirectObject(c,e,d.search());b.preventDefault();a.redirectToLogin()}}});a.$on("$stateChangeSuccess",function(a,b,c,d,e){});a.$on("ocLazyLoad.fileLoading",function(a,b){e.lazyLoadingStart()});a.$on("ocLazyLoad.fileLoaded",function(a,b){e.lazyLoadingComplete()});a.redirectToLogin=function(){if(a.is_mobile===false){f.go("auth.home.login.default")}else{f.go("auth.home.login.social")}}}})();(function(){"use strict";angular.module("app").run(a);a.$inject=["$templateCache"];function a(a){a.put("pages/template/tabs/tabset.html","<div>\n"+"  <ul class=\"nav-tabs-linetriangle nav nav-{{tabset.type || 'tabs'}}\" ng-class=\"{'nav-stacked': vertical, 'nav-justified': justified}\" ng-transclude></ul>\n"+'  <div class="tab-content">\n'+'	<div class="tab-pane"\n'+'		 ng-repeat="tab in tabset.tabs"\n'+'		 ng-class="{active: tabset.active === tab.index}"\n'+'		 uib-tab-content-transclude="tab">\n'+"	</div>\n"+"  </div>\n"+"</div>");a.put("pages/template/tabs/ui-router-tabs.html","<div>\n"+'	<uib-tabset active="tabs.active" class="tab-container {{class}}" type="{{type}}" vertical="{{vertical}}" justified="{{justified}}" template-url="pages/template/tabs/tabset.html">\n'+'		<uib-tab class="tab {{tab.class}}" ng-repeat="tab in tabs" disable="tab.disable" select="go(tab)">\n'+'			<uib-tab-heading ng-bind-html="tab.heading"></uib-tab-heading>\n'+"		</uib-tab>\n"+"	</uib-tabset>\n"+'	<div class="tab-content" ui-view>\n'+"	</div>\n"+"</div>")}})();(function(){"use strict";angular.module("app.controllers").controller("appController",a);a.$inject=["$scope","$rootScope","$state"];function a(a,b,c){var d=function(a){return c.is(a)};var e=function(a){return c.includes(a)};var f=function(){a.$broadcast("toggleSearchOverlay",{show:true})};var g={name:"The Hazel Project",author:"The Hazel Project",description:"The Hazel Project | Property Resource Analyst",layout:{menuPin:true,menuBehind:false,theme:"assets/theme/css/pages.css"},author:"dotFramework"};var h={"bg-master-lighter":d("app.extra.timeline"),"no-header":d("app.social")||d("app.calendar")||d("app.maps.vector")||d("app.maps.google"),"menu-pin":g.layout.menuPin,"menu-behind":g.layout.menuBehind,"auth-screen":e("auth")};a.app=g;a.bodyClass=h;a.is=d;a.includes=e;a.showSearchOverlay=f}})();(function(){"use strict";angular.module("app.common").config(a);a.$inject=["$provide","localStorageServiceProvider"];function a(a,b){b.setPrefix("hazel");a.decorator("localStorageService",["$delegate",function(a){var b=a.get,c=a.set;a.get=function(d){if(b(d)){var e=b(d);if(e.expiryDate){var f=Date.now();if(e.expiryDate<f){a.remove(d);return null}else{if(e.expires){a.remove(d);e.expiryDate=Date.now()+1e3*60*e.expires;c(d,e)}return e.data}}else{return e}}else{return null}};a.set=function(a,b,d,e){var f=null;if(angular.isNumber(d)){f=Date.now()+1e3*60*d;var g={data:b,expiryDate:f};if(e===true){g.expires=d}c(a,g)}else{c(a,b)}};return a}])}})();(function(){"use strict";angular.module("app.common.services").factory("eventService",a);a.$inject=["$rootScope"];function a(a){var b={};var c=function(b){return{subscribe:function(a,c){var d=a.$on(b,c);a.$on("$destroy",d);return c},unsubscribe:function(c,d){var e=c.$$listeners[b];console.log(handler.name);console.log(a.$$listeners[b]);for(var f=0;f<e.length;f++){if(e[f]===d){e.splice(f,1);break}}},publish:function(c){a.$emit(b,c)}}};b.createEvent=function(a){return c(a)};return b}})();(function(){"use strict";angular.module("app.common.services").factory("stateService",a);a.$inject=["$state"];function a(a){var b={};var c=function(b,c){a.is(b)?a.reload():a.go(b,c)};b.go=c;return b}})();(function(){"use strict";angular.module("app.common.services").constant("NOTIFICATION_SETTINGS",{TYPE:{INFO:"info",WARNING:"warning",SUCCESS:"success",DANGER:"danger",DEFAULT:"default"},STYLE:{SIMPLE:"simple",BAR:"bar",FLIP:"flip",CIRCLE:"circle"},POSITION:{TOP:"top",BOTTOM:"bottom",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right"}});angular.module("app.common").factory("notificationService",a);a.$inject=["NOTIFICATION_SETTINGS"];function a(a){var b={};var c=function(b,c,d,e){if(!c){c=a.TYPE.INFO}if(!d){d=a.POSITION.TOP_RIGHT}if(!e){e=0}$("body").pgNotification({style:a.STYLE.SIMPLE,message:b,position:d,timeout:e,type:c}).show()};var d=function(b,c,d,e){if(!c){c=a.TYPE.INFO}if(!d){d=a.POSITION.TOP}if(!e){e=0}$("body").pgNotification({style:a.STYLE.BAR,message:b,position:d,timeout:e,type:c}).show()};var e=function(b,c,d,e){if(!c){c=a.TYPE.INFO}if(!d){d=a.POSITION.TOP_RIGHT}if(!e){e=0}$("body").pgNotification({style:a.STYLE.FLIP,message:b,position:d,timeout:e,type:c}).show()};var f=function(b,c,d,e,f,g,h){if(!e){e=a.TYPE.INFO}if(!f){f=a.POSITION.TOP_RIGHT}if(!g){g=0}if(!h){h=d}var i=String.Format('<img width="40" height="40" style="display: inline-block;" src="{0}" data-src="{1}" ui-jq="unveil" data-src-retina="{0}" alt="">',h,d);$("body").pgNotification({style:a.STYLE.CIRCLE,title:c,message:b,position:f,timeout:g,type:e,thumbnail:i}).show()};b.show=c;b.showBar=d;b.showFlip=e;b.showCircle=f;return b}})();(function(){"use strict";angular.module("app.common.services").factory("errorHandler",a);a.$inject=[];function a(){var a={};var b=function(a){var b=[];for(var c in a.ModelState){for(var d=0;d<a.ModelState[c].length;d++){b.push(a.ModelState[c][d])}}return b};a.parseErrors=b;return a}})();(function(){"use strict";angular.module("app.common.services").factory("urlHelper",a);a.$inject=[];function a(){var a={};var b=function(){if(window.location.hash.indexOf("#")===0){return c(window.location.hash.substr(1))}else{return{}}};var c=function(a){var b={},c,d,e,f,g,h,i;if(a===null){return b}c=a.split("&");for(var j=0;j<c.length;j++){d=c[j];e=d.indexOf("=");if(e===-1){f=d;g=null}else{f=d.substr(0,e);g=d.substr(e+1)}h=decodeURIComponent(f);i=decodeURIComponent(g);b[h]=i}return b};a.getFragment=b;a.parseQueryString=c;return a}})();(function(){"use strict";angular.module("app.common.services").factory("dateTimeHelper",dateTimeHelper);dateTimeHelper.$inject=[];function dateTimeHelper(){var dateTimeHelperFactory={};var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var _getDate=function(a){if(a==null){return null}var b=new Date(a);return _formatDate(b,"yyyy-MM-dd")};var _formatDate=function date2str(date,format){var z={M:date.getMonth()+1,d:date.getDate(),h:date.getHours(),m:date.getMinutes(),s:date.getSeconds()};format=format.replace(/(M+|d+|h+|m+|s+)/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(-2)});return format.replace(/(y+)/g,function(a){return date.getFullYear().toString().slice(-a.length)})};var _getMonthName=function(a){return monthNames[a-1]};var _getFullMonthName=function(a){var b=new Date(a);return String.Format("{0} {1}",monthNames[b.getMonth()],b.getFullYear())};dateTimeHelperFactory.getDate=_getDate;dateTimeHelperFactory.formatDate=_formatDate;dateTimeHelperFactory.getMonthName=_getMonthName;dateTimeHelperFactory.getFullMonthName=_getFullMonthName;return dateTimeHelperFactory}})();(function(){"use strict";angular.module("app.services.misc").factory("storageService",a);a.$inject=["localStorageService"];function a(a){var b={};var c="authData";var d=120;var e="ldcData";var f="redirectObject";var g={set:function(b){a.set(c,b,d,true)},get:function(){return a.get(c)},clear:function(){a.remove(c)}};var h={set:function(b){a.set(e,b)},get:function(){return a.get(e)},clear:function(){a.remove(e)}};var i={set:function(b){a.set(f,b)},get:function(){return a.get(f)},clear:function(){a.remove(f)}};b.authData=g;b.ldcData=h;b.redirectObject=i;return b}})();(function(){"use strict";angular.module("app.services.misc").factory("authService",a);a.$inject=["$http","$window","$rootScope","ngSettings","stateService","storageService"];function a(a,b,c,d,e,f){var g=d.apiServiceBaseUri+"/Auth";var h={};var i=function(a){var c=String.Format("{0}//{1}/auth/complete",location.protocol,location.host);var e=String.Format("{0}Auth/ExternalLogin?provider={1}&redirect_url={2}",d.apiServiceBaseUri,a,c);b.location.href=e};var j=function(b,c){var d={Provider:b,AccessToken:c};return a.post(g+"/ObtainLocalAccessToken",d).then(function(a){m(a.data);p()})};var k=function(b){return a.post(g+"/Login",b).success(function(a){m(a);p();return a}).error(function(a){return a})};var l=function(b){return a.post(g+"/Register",b).success(function(a){m(a);p();return a}).error(function(a){return a})};var m=function(a){if(!a.AccessToken){return false}var b={isAuthenticated:true,accessToken:a.AccessToken,refreshToken:a.RefreshToken};f.authData.set(b);return true};var n=function(){f.authData.clear();c.redirectToLogin()};var o=function(a,b,c){var d={state:a,params:b,search:c};f.redirectObject.set(d)};var p=function(){var a=f.redirectObject.get();if(a&&a.state){if(a.params){e.go(a.state.name,a.params)}else if(a.search){e.go(a.state.name,a.search)}else{e.go(a.state.name)}f.redirectObject.clear()}else{e.go("app.dashboard")}};h.externalLogin=i;h.obtainLocalAccessToken=j;h.login=k;h.register=l;h.setAuthData=m;h.logout=n;h.setRedirectObject=o;h.redirectToDashboard=p;return h}})();(function(){"use strict";angular.module("app.services.misc").factory("authInterceptorService",a);a.$inject=["$q","$injector","$location","ngSettings","storageService"];function a(a,b,c,d,e){var f=null;var g=d.apiServiceBaseUri+"Auth/RefreshToken";var h={};var i=function(a){if(a.url.toLowerCase().startsWith(d.apiServiceBaseUri.toLowerCase())){a.headers=a.headers||{};var b=e.authData.get();if(b&&b.isAuthenticated){a.headers.Authorization="Bearer "+b.accessToken}}return a};var j=function(c){var h=c.config;if(h.url.toLowerCase()===g.toLowerCase()){return a.reject(c)}var i=b.get("authService");if(h.url.toLowerCase().startsWith(d.apiServiceBaseUri.toLowerCase())){switch(c.status){case 401:var j=e.authData.get();var k=a.defer();if(j&&j.isAuthenticated){if(!f){f=b.get("$http").post(g,{RefreshToken:j.refreshToken},{ignoreLoadingBar:true})}f.then(function(a){f=null;if(a.status==200){console.log("TOKEN REFRESHED");if(a&&a.data&&i.setAuthData(a.data)){b.get("$http")(c.config).then(function(a){k.resolve(a)},function(a){k.reject();return})}else{k.reject();i.logout()}}else{console.log("TOKEN REFRESH FAILED");k.reject();i.logout()}},function(a){f=null;console.log("TOKEN REFRESH FAILED");k.reject();i.logout()});return k.promise}else{k.reject();i.logout()}break;case 403:var l=b.get("stateService");l.go("app.error.403");break;default:return a.reject(c)}}return c||a.when(c)};h.request=i;h.responseError=j;return h}})();